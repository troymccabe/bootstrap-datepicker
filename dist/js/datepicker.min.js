!function(a){"use strict";var b=function(b,c){if(this.$element=a(b),this.options=a.extend({},a.fn.datepicker.defaults,c),this.selectedDate=null,this.selectedDate=this.options.selectedDate?this.options.selectedDate:this.options.startDate&&this.options.startDate>0?this.options.startDate:new Date,this.activeYear=this.selectedDate.getYear(),this.activeMonth=this.selectedDate.getMonth(),this.viewMode=null,!a.fn.datepicker.locale[this.options.locale])throw new Error("Invalid locale, no settings found for `"+this.options.locale+"`");if(this.locale=a.fn.datepicker.locale[this.options.locale],this.inline=!1,this.$datepicker=a(a.fn.datepicker.template),this.$element.is("input")||this.$element.hasClass("input-group")){if(!a.fn.popover)throw new Error("Datepicker requires bootstrap/popover.js");this.$element.popover(a.extend({},this.options.popover,{content:this.$datepicker,html:!0}));var d=this;this.$element.on("shown.bs.popover",function(){"undefined"==typeof a._data(d.$viewModeButton[0],"events")&&d._attachListeners()}),this.inline=!1}else this.$datepicker.appendTo(this.$element),this.inline=!0;this.$todayButton=this.$datepicker.find(".btn-today"),this.$viewModeButton=this.$datepicker.find(".btn-viewmode"),this.$previousButton=this.$datepicker.find(".btn-previous"),this.$nextButton=this.$datepicker.find(".btn-next"),this.$body=this.$datepicker.find("tbody"),this._attachListeners(),this.options.todayButton?this.$todayButton.text(this.locale.today):this.$todayButton.hide(),this._setViewMode(this.options.viewMode)};b.prototype={constructor:b,SELECTION_MODE_DAY:"day",VIEW_MODE_MONTH:"month",VIEW_MODE_YEAR:"year",VIEW_MODE_DECADE:"decade",getDate:function(){return this.selectedDate},setDate:function(a){if(a instanceof Date==!1)throw new Error("`date` passed to `setDate()` must be an instance of `Date`");this.selectedDate=a,this._setViewMode(this.VIEW_MODE_MONTH,a.getFullYear(),a.getMonth()),this.$body.find(".selected").focus()},show:function(){this.inline?this.$datepicker.show():this.$element.popover("show")},hide:function(){this.inline?this.$datepicker.hide():this.$element.popover("hide")},destroy:function(){this.hide().$element.off(".datepicker").removeData("tm.datepicker")},_attachListeners:function(){var b=this;this.$viewModeButton.on("click",function(){var c=a(this);if(!c.hasClass("disabled"))switch(b.viewMode){case b.VIEW_MODE_MONTH:b._setViewMode(b.VIEW_MODE_YEAR,b.activeYear);break;case b.VIEW_MODE_YEAR:b._setViewMode(b.VIEW_MODE_DECADE,b.activeYear)}}),this.$body.on("click","td",function(){var c=a(this);if(b.$datepicker.hasClass("decade"))b.activeYear=c.data("year"),b._setViewMode(b.VIEW_MODE_YEAR,b.activeYear);else if(b.$datepicker.hasClass("year"))b.activeMonth=c.data("month"),b._setViewMode(b.VIEW_MODE_MONTH,b.activeYear,b.activeMonth);else{if(c.hasClass("disabled"))return;var d=b.selectedDate.getMonth(),e=c.data("month");if(b.selectedDate=new Date(c.data("year"),c.data("month"),c.data("date")),d!=e){var f=b.selectedDate.getFullYear();11==d&&0==e?f+=1:0==d&&11==e&&(f-=1),b._setViewMode(b.VIEW_MODE_MONTH,f,e)}else b.$body.find("td").removeClass("selected"),c.addClass("selected");b.inline||(b.$element.hasClass("input-group")?b.$element.children("input.datepicker").val(b.options.format(b.selectedDate)):b.$element.val(b.options.format(b.selectedDate)),b.options.autoclose&&b.hide())}}),this.options.keyboard&&this.$body.on("keydown","td",function(a){if(b.$datepicker.hasClass("month")){a.preventDefault(),b.$body.find(".selected");var c=0;switch(a.which){case 37:c=b.locale.rtl?1:-1;break;case 38:c=-7;break;case 39:c=b.locale.rtl?-1:1;break;case 40:c=7}var d=9007199254740992,e=b.selectedDate.getTime()+864e5*c,f=b.options.startDate==-1/0?-d:b.options.startDate.getTime(),g=1/0==b.options.endDate?d:b.options.endDate.getTime();e>=f&&g>=e&&(b.selectedDate.setDate(b.selectedDate.getDate()+c),b.setDate(b.selectedDate))}}),this.$previousButton.on("click",function(){switch(b.viewMode){case b.VIEW_MODE_DECADE:b._setViewMode(b.VIEW_MODE_DECADE,b.activeYear-6);break;case b.VIEW_MODE_YEAR:b._setViewMode(b.VIEW_MODE_YEAR,b.activeYear-1);break;case b.VIEW_MODE_MONTH:var a=b.activeMonth,c=b.activeYear;0==a?(a=11,c-=1):a-=1,b._setViewMode(b.VIEW_MODE_MONTH,c,a)}}),this.$nextButton.on("click",function(){switch(b.viewMode){case b.VIEW_MODE_DECADE:b._setViewMode(b.VIEW_MODE_DECADE,b.activeYear+6);break;case b.VIEW_MODE_YEAR:b._setViewMode(b.VIEW_MODE_YEAR,b.activeYear+1);break;case b.VIEW_MODE_MONTH:var a=b.activeMonth,c=b.activeYear;11==a?(a=0,c+=1):a+=1,b._setViewMode(b.VIEW_MODE_MONTH,c,a)}}),this.$todayButton.on("click",function(){b.selectedDate=new Date,b._setViewMode(b.VIEW_MODE_MONTH)})},_hideWeekHeader:function(){var a=this.$datepicker.find(".week");a.length>0&&a.css("display","none")},_setColspans:function(a){this.$viewModeButton.attr("colspan",a-2),this.$todayButton.attr("colspan",a)},_setViewMode:function(a,b,c){if(a!=this.VIEW_MODE_MONTH&&a!=this.VIEW_MODE_YEAR&&a!=this.VIEW_MODE_DECADE)throw new Error("`viewMode` passed to `_setViewMode()` must be one of `Datepicker.VIEW_MODE_*`");switch(this.$body.empty(),this.$viewModeButton.removeClass("disabled"),b&&(this.activeYear=b),a){case this.VIEW_MODE_MONTH:this._showMonth(b,c);break;case this.VIEW_MODE_YEAR:this._showYear(b);break;case this.VIEW_MODE_DECADE:this._showDecade(b)}this.inline||null===this.viewMode||this.$element.popover("show"),this.viewMode=a},_showDecade:function(a){a=a||this.selectedDate.getFullYear();var b=a-parseInt(a.toString()[3]),c=b+9;this.$datepicker.removeClass("month").removeClass("year").addClass("decade"),this.$viewModeButton.text(b+" - "+c),this.$viewModeButton.addClass("disabled"),this.activeYear=b+5,this._hideWeekHeader(),this._setColspans(8);for(var d=b-1,e=0;3>e;e++){for(var f=[],g=0;4>g;g++){var h="";d==this.selectedDate.getFullYear()&&(h+="selected "),(0==e&&0==g||2==e&&3==g)&&(h+="inactive"),f.push('<td colspan="2" class="'+h+'" data-year="'+d+'">'+d+"</td>"),d++}this.locale.rtl&&f.reverse(),this.$body.append("<tr>"+f.join("")+"</tr>")}},_showMonth:function(b,c){b=b||this.selectedDate.getFullYear(),c=c>-1?c:this.selectedDate.getMonth(),this.$datepicker.removeClass("year").removeClass("decade").addClass("month"),this.$viewModeButton.text(this.locale.months[c]+" "+b),this.activeYear=b,this.activeMonth=c,-1==a.inArray(this.VIEW_MODE_YEAR,this.options.viewModes)&&this.$viewModeButton.addClass("disabled");var d=this.$datepicker.find(".week");if(0==d.length){for(var e=this.options.weekNumbers?['<th class="weeknumber">&nbsp;</th>']:[],f=this.options.weekStart;7>f;f++)e.push("<th>"+this.locale.daysMin[f]+"</th>");if(this.options.weekStart>0)for(var g=0;g<this.options.weekStart;g++)e.push("<th>"+this.locale.daysMin[g]+"</th>");this.locale.rtl&&e.reverse(),this.$datepicker.find("thead").append('<tr class="week">'+e.join("")+"</tr>")}else d.css("display","");var h=new Date(b,0,1),i=new Date(b,c,1),j=i.getDay(),k=i.getDate();j>this.options.weekStart?i.setDate(k-(j-this.options.weekStart)):j==this.options.weekStart?i.setDate(k-7):i.setDate(k-(7+j-this.options.weekStart));for(var l=this,m=new Date,n=function(){var d="";i.getMonth()!=c&&(d+="inactive "),i.getFullYear()==m.getFullYear()&&i.getMonth()==m.getMonth()&&i.getDate()==m.getDate()&&(d+="today "),i.getFullYear()==l.selectedDate.getFullYear()&&i.getMonth()==l.selectedDate.getMonth()&&i.getDate()==l.selectedDate.getDate()&&(d+="selected "),(a.inArray(i.getDay(),l.options.disabledDays)>-1||"object"==typeof l.options.startDate&&(l.options.startDate.getFullYear()>=i.getFullYear()&&l.options.startDate.getMonth()>i.getMonth()||l.options.startDate.getFullYear()==i.getFullYear()&&l.options.startDate.getMonth()==i.getMonth()&&l.options.startDate.getDate()>i.getDate())||"object"==typeof l.options.endDate&&(l.options.endDate.getFullYear()<=i.getFullYear()&&l.options.endDate.getMonth()<i.getMonth()||l.options.endDate.getFullYear()==i.getFullYear()&&l.options.endDate.getMonth()==i.getMonth()&&l.options.endDate.getDate()<i.getDate()))&&(d+="disabled ");var e=i.getDate();p.push('<td class="'+d+'" data-year="'+b+'" data-month="'+i.getMonth()+'" data-date="'+e+'">'+e+"</td>"),i.setDate(i.getDate()+1)},f=0;6>f;f++){for(var o=Math.ceil(((i-h)/864e5+h.getDay()+1)/7),p=this.options.weekNumbers?['<td class="weeknumber">'+o+"</td>"]:[],g=this.options.weekStart;7>g;g++)n();if(this.options.weekStart>0)for(var q=0;q<this.options.weekStart;q++)n();this.locale.rtl&&p.reverse(),this.$body.append("<tr>"+p.join("")+"</tr>")}this.$body.find("td").attr("tabindex","-1"),this.options.weekNumbers?this._setColspans(8):this._setColspans(7)},_showYear:function(b){b=b||this.selectedDate.getFullYear(),this.$datepicker.removeClass("month").removeClass("decade").addClass("year"),this.$viewModeButton.text(b),this.activeYear=b,-1==a.inArray(this.VIEW_MODE_DECADE,this.options.viewModes)&&this.$viewModeButton.addClass("disabled"),this._hideWeekHeader(),this._setColspans(8);for(var c=this.selectedDate.getMonth(),d=0;3>d;d++){for(var e=[],f=0;4>f;f++){var g=f+4*d,h="";c==g&&b==this.selectedDate.getFullYear()&&(h+="selected");var i=this.locale.monthsShort[g];e.push('<td colspan="2" class="'+h+'" data-year="'+b+'" data-month="'+g+'">'+i+"</td>")}this.locale.rtl&&e.reverse(),this.$body.append("<tr>"+e.join("")+"</tr>")}}};var c=a.fn.datepicker;a.fn.datepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("tm.datepicker"),g="object"==typeof c&&c;f||e.data("tm.datepicker",f=new b(this,g)),"string"==typeof c&&"function"==typeof f[c]&&f[c](d)})},a.fn.datepicker.constructor=b,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=c,this},a.fn.datepicker.defaults={autoclose:!0,disabledDays:[],endDate:1/0,format:function(a){return a.toLocaleDateString()},highlightToday:!0,keyboard:!0,locale:"en",popover:{animation:!1,placement:"auto",template:'<div class="popover datepicker-popover"><div class="arrow"></div><div class="popover-content"></div></div>'},selectedDate:null,selectionMode:"day",startDate:-1/0,todayButton:!0,viewMode:"month",viewModes:["month","year","decade"],weekNumbers:!1,weekStart:0},a.fn.datepicker.template='<table class="datepicker"><thead><tr><th class="btn-previous"><span class="glyphicon glyphicon-chevron-left"></span></th><th colspan="6" class="btn-viewmode"></th><th class="btn-next"><span class="glyphicon glyphicon-chevron-right"></span></th></tr></thead><tbody></tbody><tfoot><tr><th colspan="8" class="btn-today"></th></tr></tfoot></table>',a.fn.datepicker.locale={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",workWeek:[1,2,3,4,5]}}}(window.jQuery);